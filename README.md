# 統合政府 30年財政シミュレーター

2026〜2055年の30年間における、日本政府と日本銀行を一体とした「統合政府」の財政推移をシミュレーションするインタラクティブWebアプリケーションです。

## 概要

日本の財政を「政府＋日銀」の統合バランスシートで捉え、金利・インフレ・為替・貿易・家計への波及効果まで一貫してシミュレーションします。パラメータをスライダーで自由に調整し、6つのプリセットシナリオと比較しながら、日本財政の将来像を探ることができます。

## 主な機能

### シミュレーション
- **税収モデル**: 消費税・所得税・法人税・その他税の4区分で個別に推計
- **日銀会計**: 国債保有利回りと当座預金付利の差（逆ザヤ）を追跡、累積損失と自己資本バッファを考慮
- **債務動態**: 9年借換ロジックによる平均クーポン推移、利払負担率の算出
- **貿易収支**: 為替レート変動 → 輸出入額 → 貿易収支の連鎖シミュレーション
- **対外純資産（NFA）**: 経常収支（貿易収支＋所得収支）の累積でNFAを追跡
- **通貨リスクプレミアム**: 経常赤字＋NFA防衛ライン割れで金利に自動加算
- **家計インパクト**: 実質賃金・貧困率・ジニ係数・所得格差倍率の推計
- **モデル家計**: 年収400万円世帯の可処分所得・食費・光熱費の変化を具体的に表示
- **エネルギー補助金**: 政府歳出としてのコストと、家計の物価軽減効果の両面を反映

### 6つのプリセットシナリオ
1. ベースライン（現状維持）
2. 高成長シナリオ
3. スタグフレーション
4. 金利急騰シナリオ
5. 財政再建シナリオ
6. 急激円安シナリオ

### 可視化
- メインチャート: 利払負担率・財政収支・債務残高
- 家計チャート: 貧困率・ジニ係数・実質賃金・可処分所得変化
- 貿易チャート: 貿易収支・為替レート・対外純資産・経常収支
- ウォーターフォール分析: 年度別の収支構造を積み上げ式で表示
- 詳細データ表: 全数値をCSVダウンロード可能

### 解説タブ
- 計算ロジックツリー（A〜F: 歳入・支出・収支・貿易・家計・NFA）
- 統合政府の資金フロー図（SVG）
- 日銀納付金・金利感応度のグラフ
- パラメータ設定根拠とデータ出典

## 技術スタック

| 技術 | 用途 |
|------|------|
| React 19 | UI フレームワーク |
| TypeScript | 型安全なコード |
| Vite | ビルドツール |
| Recharts | チャート描画 |
| Streamlit | 配信ラッパー（開発環境） |

## プロジェクト構成

```
src/
├── main.tsx          # エントリーポイント
├── App.tsx           # メインアプリ（タブ切替・状態管理）
├── data.ts           # 実績データ・シナリオ定義・型定義
├── simulation.ts     # シミュレーションロジック（runSimulation関数）
├── Sidebar.tsx       # サイドバーUI（パラメータ調整スライダー）
├── SimulationTab.tsx  # シミュレーションタブ（チャート・データ表）
├── ExplanationTab.tsx # 解説タブ（ロジック解説・フロー図・ウォーターフォール）
└── index.css         # グローバルスタイル
dist/                 # ビルド出力（静的HTML/JS/CSS）
app.py                # Streamlit配信ラッパー
vite.config.ts        # Vite設定
```

## シミュレーションロジック概要

### A: 歳入
- **消費税**: 前年 × (1 + インフレ率) ※税率変更年度に調整
- **所得税**: 前年 × (1 + 名目成長率 × 1.4)
- **法人税**: 前年 × (1 + 実質成長率×2.0 + インフレ率×0.5) × 円安効果
- **その他税**: 前年 × (1 + 名目成長率 × 0.8)
- **日銀納付金**: 保有国債利回り − 当座預金付利（逆ザヤ時は累積損失追跡）

### B: 支出
- **政策経費**: 前年 × (1 + インフレ率) + 自然増 + エネルギー補助金
- **利払い費**: 債務残高 × 平均クーポン（9年借換ロジック）

### C: 収支・債務
- **財政収支**: 歳入 − 歳出
- **債務残高**: 前年 + 赤字額

### D: 貿易収支
- **為替**: 前年 × (1 + 円安進行率)
- **輸入**: 前年 × (1 + 実質成長率) × (1 + インフレ × 円安係数)
- **輸出**: 前年 × (1 + 世界成長率) × (1 + 円安メリット)

### E: 家計インパクト
- **実効CPI**: (インフレ率 + 円安コストプッシュ) × (1 − 補助金率 × 0.5)
- **実質賃金**: 名目賃金上昇率 − 実効CPI
- **貧困率**: 前年 × (1 + (実効CPI − 賃金)差 × 感応度)
- **光熱費**: 円安・インフレで上昇、エネルギー補助金で軽減

### F: 対外純資産
- **経常収支**: 貿易収支 + 所得収支（NFA × 3%）
- **通貨リスクプレミアム**: 経常赤字 + NFA防衛ライン割れで金利に自動加算

## ビルド・開発

```bash
# 開発サーバー起動
npx vite --host 0.0.0.0 --port 5001

# プロダクションビルド
npx vite build

# Streamlit経由で配信（ポート5000）
streamlit run app.py --server.port 5000
```

ビルド後の `dist/index.html` は単体で動作するため、GitHub Pages やブログ記事への埋め込みにも対応しています。

## データ出典

- **財務省**: 税収実績、歳出決算、国債費、利払い費、貿易統計
- **総務省統計局**: GDP、CPI、マクロ経済指標
- **厚生労働省**: 相対的貧困率、所得分布（国民生活基礎調査）
- **日本銀行**: 金融政策、国債保有残高、当座預金残高
- **OECD**: Society at a Glance（貧困率感応度の参考）

## ライセンス

MIT
