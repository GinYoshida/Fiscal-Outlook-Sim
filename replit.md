# 統合政府 財政シミュレーター（30〜50年）

## Overview
このプロジェクトは、2026年から最大2075年までの30〜50年間における日本政府と日本銀行を一体とした「統合政府」の財政推移をシミュレーションするReact + TypeScriptアプリケーションです。日本の財政の持続可能性を多角的に分析し、経済政策立案者や一般市民が将来の財政課題と可能性を理解することを目的としています。主要な機能として、貿易収支（為替の逆累進性）、家計への影響（貧困率・ジニ係数）、人的資本・人口動態モデル（教育投資パイプライン・内生的出生率）のシミュレーションを含み、さまざまな経済シナリオ下での財政健全性を評価します。

## User Preferences
ユーザーとのコミュニケーションにおいて、私はシミュレーターの目的、計算ロジック、および各変数の詳細について詳細な説明を重視します。複雑な財政メカニズムや経済指標について、図やチャートを用いた視覚的な理解を促進することを好みます。また、複数のシナリオを比較検討し、それぞれのメリット・デメリットや改善策を提示する分析的なアプローチを歓迎します。

## System Architecture
本アプリケーションは、React 19とTypeScriptをベースに、Viteによる高速な開発環境とビルドプロセスを採用しています。UI/UXは、Rechartsライブラリを用いて、主要な財政指標、家計影響、貿易収支、日銀バランスシート、GDP・企業セクター、人的資本・人口動態などの多様なチャートを視覚的に表現しています。

**コア機能:**
- **3タブ構成:**
    1.  **解説タブ:** シミュレーターの目的、計算ロジックツリー（A〜J）、各変数の解説、統合政府の仕組み（フロー図・日銀納付金・金利感応度）、ウォーターフォール分析、データ出典を提供します。
    2.  **シミュレーションタブ:** 利払負担率・財政収支・債務残高、家計影響、人的資本・人口動態、貿易収支・為替レート、日銀バランスシート、金利比較、財政リスクプレミアム、GDP・企業セクターなど、主要なシミュレーション結果をインタラクティブなチャートとデータ表で表示します。サイドバーからパラメータ調整が可能です。
    3.  **シナリオ一覧タブ:** 10種類のプリセットシナリオ（ベースライン、高成長、スタグフレーション、金利急騰、財政再建、急激円安、少子化加速、テクノロジー革命、グローバル危機、大増税）を横断的に比較し、棒グラフ、レーダーチャート、折れ線推移、サマリー表、展開式カード形式で表示します。シナリオ比較は30年固定で実行。
- **シミュレーションロジック:**
    -   **税収モデル:** 消費税、所得税、法人税、その他税の4区分で、インフレ率、成長率、賃金上昇率、為替、輸出入などのマクロ経済変数に基づいて税収を算出します。
    -   **日銀モデル:** 保有国債の利回り、当座預金金利、自己資本バッファを考慮した日銀の純利益と統合政府への納付金を計算し、累積損失が歳入に与える影響をシミュレートします。QT（量的引き締め）や利回り追随メカニズムも内包します。
    -   **政策経費・国債費:** 分野別歳出合計、エネルギー補助金、平均クーポン利回り、新発国債比率などを考慮し、歳出全体をモデリングします。
    -   **貿易・内生為替モデル:** 為替レートを金利差（α=0.5）・インフレ差（β=0.3）・リスクプレミアム（γ=0.5）の3要因から内生的に決定。パラメータ `foreignInterestRate`（海外金利）と `foreignInflation`（海外CPI）を導入。`yenDepreciation` は「為替バイアス」として構造的な円安/円高傾向を表現。サイドバーに米国10年国債利回り（UST10Y）・JGB10Y実績のミニチャートを表示し、パラメータの妥当性を判断可能。対外純資産（NFA）の変動と通貨信任リスクプレミアムを追跡し、経常収支の悪化が加速傾向にある場合にリスクプレミアムが非線形的に増大する加速メカニズムを搭載。
    -   **家計インパクトモデル:** CPI上昇率、実質賃金伸び率、貧困率、ジニ係数、モデル家計の可処分所得変化を計算し、消費税増税やインフレが家計に与える影響を評価します。内生賃金モデルにより、生産性分配率とインフレ転嫁率が賃金上昇に与える影響も考慮します。
    -   **人的資本・人口動態モデル（案D+D1）:** 教育投資パイプライン（15年ラグ）、人口老化ペナルティ、テクノロジー効果から人的資本指数を計算。内生的出生率（TFR）は賃金効果・格差効果・子育て支援効果の3チャネルで決定され、20年ラグで人口成長率にフィードバック。社会活力指数が実質成長率にブーストを与え、人的資本指数は所得税・賃金に影響。
    -   **企業セクターモデル:** 法人税から企業利益を逆算し、内部留保の累積、内部留保還元率、内部留保GDP比を追跡します。
    -   **内生的なフィードバックループ:** 円安の法人税への影響、外貨準備評価益、エネルギー補助金、動的通貨リスクプレミアム、内生的財政リスクプレミアム、内生賃金モデル、人的資本→成長・税収・賃金フィードバック、TFR→人口→社会保障費フィードバックなどが相互に影響しあう複雑なフィードバックループを構築しています。
-   **制約条件システム:** 貧困率、ジニ係数、利払負担率、実質政策的経費指数、経常赤字連続年数の5つのレッドラインを設定し、これらの制約が満たされない場合に警告を発します。経常収支が最終5年間連続マイナスかつNFA継続減少の場合は「通貨信認リスク（最上級）」アラートが発生します。
-   **最適化機能:** 勾配降下法を用いて警告数を最小化するパラメータ探索機能を提供します。人口成長率、教育投資GDP比、テクノロジー効果も最適化対象。
-   **ユーザーインターフェース:** サイドバーでのパラメータ調整（検索ボックス、直接編集機能付き）、[?]アイコンによるチャートヘルプシステム、レスポンシブデザイン。シミュレーション期間を30年/40年/50年から選択可能。

## External Dependencies
-   **React:** ユーザーインターフェース構築のためのJavaScriptライブラリ。
-   **TypeScript:** 型安全性を提供し、大規模アプリケーション開発を支援するJavaScriptのスーパーセット。
-   **Vite:** 高速な開発サーバーとビルドツール。
-   **Recharts:** Reactで美しくインタラクティブなチャートを作成するためのライブラリ。
-   **Streamlit:** (app.pyを通じて) Reactアプリケーションをインラインで配信するためのPythonフレームワーク。
-   **データソース (参照元):**
    -   財務省: 税収、歳出、国債費、利払い費、貿易統計
    -   総務省統計局: マクロ経済統計
    -   厚生労働省: 貧困率・所得分布・人口動態統計
    -   FRED (Federal Reserve Economic Data): 米国10年国債利回り
    -   BLS (Bureau of Labor Statistics): 米国消費者物価指数
    -   OECD: Education at a Glance（教育投資GDP比）
    -   国立社会保障・人口問題研究所: 出生率・人口推計
