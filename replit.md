# 統合政府 30年財政シミュレーター

## Overview
2026〜2055年の30年間における、日本政府と日本銀行を一体とした「統合政府」の財政推移をシミュレーションするStreamlitアプリ。

## Architecture
- **app.py**: メインアプリケーション。全シミュレーションロジック、UI、チャートを含む
- **Stack**: Python 3.11 + Streamlit + Pandas + Plotly + NumPy
- **static/**: React SPA版のHTML/JSファイル（旧版、現在未使用）

## Key Features
- 15列 [A]〜[O] の年次ループ計算
- サイドバーでパラメータ調整（インフレ率、成長率、リスクプレミアム等）、各パラメータに[?]ヘルプツールチップ付き
- 5つのプリセットシナリオ（ベースライン、高成長、スタグフレーション、金利急騰、財政再建）
- 5年おきサマリーテーブル（階層化ヘッダー付き）
- 利払い負担率30%超過時の警告
- 5つのPlotlyチャート（アニメーション無効）
- ウォーターフォール分析タブ（2015〜2055年度対応、実績/シミュレーション切替）
- 統合政府の仕組みタブ（資金フロー図、日銀納付金構造、金利感応度分析）
- 変数説明タブ（計算ロジック・パラメータ解説・計算式の根拠）
- 実績データ（2015〜2024年度）と出典リンク
- 全年度データの展開表示（┗記号で計算列を階層化）
- 日銀納付金内訳データの展開表示（利息収入・付利コスト・政策金利）

## Simulation Logic
- 税収: 前年税収 × (1 + 名目成長率 × 弾性値1.2)
- 日銀納付金: max(保有国債×利回り - 当座預金×政策金利, 0)
- 政策経費: 前年 × (1 + インフレ率) + 自然増0.5兆円
- 平均クーポン: (前年×8/9) + (市場金利×1/9) ← 9年借換ロジック
- 債務残高: 前年 + (合計費用 - 合計収益)

## Data Sources
- 財務省: 税収、歳出、国債費、利払い費データ
- 総務省統計局: マクロ経済統計

## Recent Changes
- 2026-02-22: 統合政府の仕組みタブ追加（資金フロー図・日銀収益構造・金利感応度）
- 2026-02-22: サイドバー各パラメータに[?]ヘルプツールチップ追加
- 2026-02-22: 日銀納付金内訳データ展開表示追加
- 2026-02-22: データ表の列ヘッダー階層化（┗記号で計算列を表示）
- 2026-02-13: Plotlyベースに移行（アニメーション無効化、モバイル最適化CSS追加）
- 2026-02-13: ウォーターフォール分析タブ、変数説明タブ追加
- 2026-02-13: 5シナリオプリセット実装
- 2026-02-12: 初期バージョン作成
